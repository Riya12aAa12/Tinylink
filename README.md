## TinyLink

TinyLink is a production-ready, bit.ly-style URL shortener built with Next.js App Router, TailwindCSS, and Neon Postgres. It exposes a public API, real-time dashboard, redirect handler, code-specific stats, and operational health check.

### Features

- Shorten URLs with autogenerated or custom codes (`[A-Za-z0-9]{6,8}`)
- Dashboard table with search, sorting, click totals, copy buttons, and delete actions
- Stats screen at `/code/:code` and redirect handler at `/:code` (302 + click tracking)
- `GET /healthz` returns `{ "ok": true, "version": "1.0" }`
- REST API: `POST/GET /api/links`, `GET/DELETE /api/links/:code`
- Responsive Tailwind UI with inline validation, loading states, and friendly alerts

### Tech stack

- [Next.js 16](https://nextjs.org) (App Router, Route Handlers)
- [TailwindCSS](https://tailwindcss.com) (v4, CSS-first authoring)
- [Neon Postgres](https://neon.tech) via [Prisma](https://prisma.io)
- [TypeScript](https://www.typescriptlang.org/)

## Database

Generate the Prisma client and run migrations against Neon (or any Postgres 14+ instance):

```bash
npm run db:generate
npm run db:migrate    # deploys prisma/migrations to the DATABASE_URL target
npm run db:studio     # optional: inspect data locally
```

For local hacking without managed Postgres you may run `npm run db:push` against a Docker/Postgres container.

---

## Development

```bash
npm install
npm run dev
```

Visit http://localhost:3000 to use the dashboard. API routes live under http://localhost:3000/api/links.

### Tests & linting

```bash
npm run lint   # also used by CI as "test"
```

---

## Deployment checklist

1. **Neon Postgres**
   - Create a Neon project
   - Copy the pooled connection string into `DATABASE_URL`
   - Run `npm run db:migrate`
2. **Vercel**
   - Import this repository
   - Set project env vars (`DATABASE_URL`, `BASE_URL`)
   - Enable the default Postgres connection pooling (Vercel handles automatically)
3. **Verification**
   - Exercise `/api/links`, `/code/:code`, and `/healthz`
   - Capture the production URL for deliverable #1
4. **Deliverables**
   - Public Vercel URL
   - GitHub repo link
   - Loom/Screen recording walkthrough
   - AI transcript (this conversation)

---

## API quick reference

| Endpoint           | Method   | Description                            |
| ------------------ | -------- | -------------------------------------- |
| `/api/links`       | `POST`   | Create a short link (`{ url, code? }`) |
| `/api/links`       | `GET`    | List all links                         |
| `/api/links/:code` | `GET`    | Fetch stats for a code                 |
| `/api/links/:code` | `DELETE` | Remove a code                          |
| `/code/:code`      | `GET`    | Stats UI for a code                    |
| `/:code`           | `GET`    | 302 redirect + click tracking          |
| `/healthz`         | `GET`    | JSON health check                      |

All JSON responses follow `{ data: ... }` or `{ message }` conventions with proper HTTP status codes (400, 404, 409, 500).

---

## Notes

- Redirects run in a Route Handler and increment click counts atomically before issuing a 302.
- Client components refresh the server-rendered table via `router.refresh()` ensuring data consistency.
- Delete requests require confirmation and surface errors inline.
- Table search/filter runs on the client for snappy interactions; server fetch is still the source of truth.

Happy linking!
